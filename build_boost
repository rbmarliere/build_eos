#!/usr/bin/env zsh

BOOST_VER=boost-1.64.0
WD=$USER_GIT_ROOT/boost
[[ ! -d $WD ]] && git clone \
                    --recursive \
                    --single-branch \
                    --branch "$BOOST_VER" \
                    git@github.com:boostorg/boost.git $WD

cd $WD
read REPLY"?clean $WD? [y|N] "
[[ $REPLY =~ ^[Yy]$ ]] && git clean -fdx
mkdir -p {build,release}

./bootstrap.sh \
    --prefix=$WD/release \
    --with-toolset=clang
./b2 -a \
    -j${NPROC:-1} \
    --build-dir=$WD/build \
    --prefix=$WD/release \
    toolset=clang \
    threading=multi \
    install

